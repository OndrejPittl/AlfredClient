<div class="modal remodal" data-remodal-id="new-post">
  <button data-remodal-action="close" class="remodal-close"></button>
  <div class="modal__content">
    {{diagnostic}}
    <form class="form form--compact form--post form--post-{{postType}}" #postForm="ngForm" (ngSubmit)="submitPost($event)" enctype='multipart/form-data'>
      <div class="form__row">
        <div class="form__col">
          <input class="form-control" type="text" placeholder="title" [(ngModel)]="post.title" name="title" #title="ngModel">
        </div>
      </div>
      <div class="form__row">
        <div class="form__col">
          <textarea class="form-control" placeholder="text of a post" [(ngModel)]="post.body" name="body" #body="ngModel"></textarea>
        </div>
      </div>
      <div class="form__row">
        <div class="form__col">
          <div class="checkbox">
            <label class="btn btn--tiny btn--link">
              <span>upload a photo</span>
              <input type="file" (change)="fileSelected($event.target.files[0])" name="images" hidden #imgElem>
            </label>
          </div>
        </div>
        <div class="form__col form__btn-group">
          <span class="input-icon">#</span>
          <input class="form-control" type="text" placeholder="tag" [(ngModel)]="post.tag" name="tag" #tag="ngModel" (keydown.space)="$event.preventDefault()" [required]="post.tags.length <= 0">
          <button class="btn btn--tiny btn--wide" (click)="addTag()" [disabled]="!tag.value">Add tag</button>
        </div>
      </div>
      <div class="form__row" *ngIf="post.image">
        <div class="form__col">
          <strong>image:</strong>
          <span class="form__img" (click)="removeImg()">{{post.image}}</span>
        </div>
      </div>
      <div class="form__row" *ngIf="post.tags.length > 0">
        <div class="form__col">
          <strong>tags:</strong>
          <span class="form__hash" *ngFor="let t of post.tags" (click)="removeTag($event)">{{t}}</span>
        </div>
      </div>
      <div class="form__row">
        <div class="form__col">
          <button data-remodal-action="confirm" class="btn btn--tiny btn--wide" type="submit" [disabled]="!postForm.form.valid || post.tags.length <= 0 || (!body.value && !post.image)">Submit</button>
        </div>
      </div>
      <div class="form__row">
        <div class="form__col">
          <ul class="form__errors">
            <li *ngIf="!body.value && !post.image">Text and/or an image of a post missing.</li>
            <li *ngIf="post.tags.length <= 0">At leaset one tag is required.</li>
          </ul>
        </div>
      </div>
    </form>
  </div>
</div>
